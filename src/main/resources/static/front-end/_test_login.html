<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <center>
        <div>
            <table border=1>
                <tr>
                    <td colspan=2>
                        <p align=center>輸入<b>(測試登入)</b>:<br>帳號:<b>1111</b><br>密碼:<b>1111</b><br>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p align=right><b>account:</b>
                    </td>
                    <td>
                        <p><input type=text name="account" value="" id="myAccount" size=15>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p align=right><b>password:</b>
                    </td>
                    <td>
                        <p><input type=text name="password" value="" id="myPassword" size=15>
                    </td>
                </tr>
                <tr>
                    <td colspan=2 align=center><input type="button" id="myBtn" value="  ok   "></td>
                </tr>
            </table>
        </div>
    </center>

    <!-- 使用JQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"
            integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script>

        $(function () {
            $('#myBtn').on('click', function () {
                const myAccount = $('#myAccount').val();
                const myPassword = $('#myPassword').val();


                //取得值 (幫他加一個id應該更好取得)
                const valid = {
                    account: myAccount,
                    password: myPassword,
                }

                fetch(`http://localhost:8080/testLogin`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    //將帳號密碼丟到後端做驗證
                    body: JSON.stringify(valid),
                })
                    .then(response => response.ok)
                    .then(data => {

                        if (data) { //如果驗證成功
                            //先暫存
                            sessionStorage.setItem('test-login', JSON.stringify(valid));
                            //改變介面 (這邊因為是範例 就跳轉了)
                            window.location.href = 'index.html';
                        } else {
                            alert('無法登入喔 QQ');
                        }

                    })
                    .catch(error => { console.log(error); });

            });
        });


    </script>
</body>

</html>